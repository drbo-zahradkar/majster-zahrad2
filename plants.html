<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="favicon.jpg" type="image/jpg+xml">
  <title>Encyklop√©dia rastl√≠n ‚Äì Majster z√°hrady</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <style>
    :root {
      --accent: #f7931e; /* oran≈æov√° */
      --bg: #fdfbf7;
      --card-bg: #ffffff;
      --text: #333;
      --shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    body {
      background: var(--bg);
      font-family: system-ui, sans-serif;
      color: var(--text);
      transition: background 0.3s ease;
    }

    header.site-header {
      background: var(--accent);
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
    }
    .site-header .logo-text { font-weight: 700; }
    .site-nav a {
      color: white;
      text-decoration: none;
      padding: 6px 10px;
      border-radius: 8px;
      transition: background 0.2s;
    }
    .site-nav a:hover,
    .site-nav a[aria-current="page"] {
      background: rgba(255,255,255,0.2);
    }

    h1 {
      color: var(--accent);
      margin-top: 20px;
    }

    /* Filtrovac√≠ panel */
    .filters {
      background: white;
      padding: 15px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      margin: 20px 0;
    }
    .filters input,
    .filters select {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 8px;
      font-size: 15px;
      transition: border 0.2s;
    }
    .filters input:focus,
    .filters select:focus {
      outline: none;
      border-color: var(--accent);
    }
    .filter-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      transition: background 0.2s;
    }
    .btn:hover {
      background: #e07800;
    }

    /* Karty */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .plant-card {
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
      transform: translateY(0);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .plant-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .plant-card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .plant-card h3 {
      margin: 10px 12px 4px;
      font-size: 1.15em;
      color: var(--accent);
    }
    .plant-card .latin {
      margin: 0 12px 12px;
      font-size: 0.9em;
      color: #666;
      font-style: italic;
    }

    footer.site-footer {
      text-align: center;
      padding: 20px;
      color: #777;
    }
  </style>
</head>
<body data-page="plants">
<header class="site-header">
  <a class="logo" href="index.html"><span class="logo-mark">üå±</span><span class="logo-text">Majster z√°hrady</span></a>
  <nav class="site-nav">
    <a href="plants.html" aria-current="page">Encyklop√©dia</a>
    <a href="tips.html">Sez√≥nne tipy</a>
    <a href="planner.html">Pl√°novaƒç</a>
    <a href="quiz.html">Kv√≠z</a>
    <a href="karel.html">Karel</a>
  </nav>
  <div class="controls">
    <button class="btn ghost" id="themeToggle" aria-pressed="false">üåì</button>
    <button class="btn ghost" id="accentCycle">üé®</button>
  </div>
</header>

<main class="container">
  <header class="page-head">
    <h1>Encyklop√©dia rastl√≠n</h1>
    <p>Vyhƒæad√°vaj, filtruj a objavuj kr√°sy botanick√©ho chaosu.</p>
  </header>

  <section class="filters" aria-label="Filtre rastl√≠n">
    <input id="plantSearch" class="input" type="search" placeholder="Hƒæadaj n√°zov, latinsk√Ω n√°zov alebo tagy‚Ä¶" />
    <div class="filter-row">
      <select id="filterSun" class="select" aria-label="Filter slnko">
        <option value="">Svetlo (v≈°etko)</option>
        <option value="slneƒçn√©">Slneƒçn√©</option>
        <option value="polotie≈à">Polotie≈à</option>
        <option value="tie≈à">Tie≈à</option>
      </select>
      <select id="filterWater" class="select" aria-label="Filter z√°lievka">
        <option value="">Z√°lievka (v≈°etko)</option>
        <option value="n√≠zka">N√≠zka</option>
        <option value="stredn√°">Stredn√°</option>
        <option value="vysok√°">Vysok√°</option>
      </select>
      <select id="filterDifficulty" class="select" aria-label="Filter n√°roƒçnos≈•">
        <option value="">N√°roƒçnos≈• (v≈°etko)</option>
        <option value="ƒæahk√°">ƒΩahk√°</option>
        <option value="stredn√°">Stredn√°</option>
        <option value="n√°roƒçn√°">N√°roƒçn√°</option>
      </select>
      <button id="resetFilters" class="btn">Reset</button>
    </div>
  </section>

  <section id="plantList" class="cards-grid" aria-live="polite">
    <p>Naƒç√≠tavam rastliny‚Ä¶ üåø</p>
  </section>
</main>

<footer class="site-footer"><p>¬© <span id="year"></span> Majster z√°hrady</p></footer>

<script>
  const yearEl = document.getElementById('year');
  if (yearEl) yearEl.textContent = new Date().getFullYear();

  const list = document.getElementById('plantList');
  const searchInput = document.getElementById('plantSearch');
  let plants = [];

  const query = `
    SELECT ?item ?itemLabel ?latinLabel ?image WHERE {
      ?item wdt:P31/wdt:P279* wd:Q16521.
      OPTIONAL { ?item wdt:P225 ?latinLabel. }
      OPTIONAL { ?item wdt:P18 ?image. }
      SERVICE wikibase:label { bd:serviceParam wikibase:language "sk,en". }
    }
    LIMIT 50
  `;

  fetch("https://query.wikidata.org/sparql?query=" + encodeURIComponent(query) + "&format=json")
    .then(res => res.json())
    .then(data => {
      plants = data.results.bindings.map(p => ({
        name: p.itemLabel.value,
        latin: p.latinLabel ? p.latinLabel.value : "‚Äî",
        img: p.image ? p.image.value : "https://via.placeholder.com/300x200/FFF3E0/333?text=Bez+obr√°zka"
      }));
      renderPlants(plants);
    })
    .catch(err => {
      console.error(err);
      list.innerHTML = "<p>Nepodarilo sa naƒç√≠ta≈• rastliny üò¢</p>";
    });

  function renderPlants(data) {
    list.innerHTML = '';
    if (data.length === 0) {
      list.innerHTML = '<p>Nena≈°li sa ≈æiadne rastliny.</p>';
      return;
    }
    data.forEach(plant => {
      const card = document.createElement('div');
      card.className = 'plant-card';
      card.innerHTML = `
        <img src="${plant.img}" alt="${plant.name}">
        <h3>${plant.name}</h3>
        <div class="latin">${plant.latin}</div>
      `;
      list.appendChild(card);
    });
  }

  searchInput.addEventListener('input', () => {
    const q = searchInput.value.toLowerCase();
    const filtered = plants.filter(p =>
      p.name.toLowerCase().includes(q) ||
      p.latin.toLowerCase().includes(q)
    );
    renderPlants(filtered);
  });

  document.getElementById('resetFilters').addEventListener('click', () => {
    searchInput.value = '';
    renderPlants(plants);
  });
</script>
</body>
</html>
